# CODEX Diary

Code review history and findings. Updated by Codex during each review.

---

## Accepted / Won't Fix

These findings have been reviewed by the developer and are intentional:

- **Container entrypoint fails if Codex auth fails.** This is expected behavior.
  Codex auth is required for code review to work, so failing fast on first-run
  is the correct approach. The user must complete the OAuth flow before proceeding.
  Do not flag this again.

- **`reset.sh` dotfile glob.** Fixed in M3 — now uses rm-and-recreate instead
  of globbing. Do not flag this again.

- **Codex symlink in spec.** No symlink reference exists in MOARCODE.md. The
  Dockerfile installs codex via npm globally and `codereview.sh` uses
  `command -v codex`. This is correct. Do not flag this again.

- **Firewall does not cover IPv6.** Accepted for v1. The firewall is optional
  and documented as such. IPv6 hardening is a future enhancement, not a blocker.
  Do not flag this again.

- **NET_ADMIN/NET_RAW caps always granted.** Accepted for v1. The caps are
  harmless without the firewall script being invoked, and gating them behind a
  flag adds complexity for minimal benefit. Do not flag this again.

- **`develop.sh` trusts `.project-name` without re-validation.** The file is
  machine-generated by `install.sh` which already sanitizes. If someone
  hand-edits the dotfile and breaks it, Docker fails immediately with a clear
  error. Duplicating sanitization logic means two places to maintain for a
  scenario that doesn't happen in practice. Do not flag this again.

---

## Compacted Review History (2026-02-06 through 2026-02-07)

Nine reviews were conducted during M1–M4. Key findings and their resolutions:

### Fixed
- **`reset.sh` dotfile glob** — `rm -rf .*` expanded to `.`/`..`. Fixed in M3: replaced with rm-and-recreate.
- **Leading hyphens in project name** — `install.sh` didn't strip them, breaking Docker commands. Fixed in M4.
- **Docs/spec drift** — Multiple rounds caught `MOARCODE.md` references after it was replaced by `README.md` + `docs/architecture.md`. Fixed in M4.
- **`develop.sh` fallback name unsanitized** — Fallback from parent directory wasn't lowercased or stripped. Fixed alongside project name validation.

### Accepted (see above)
- Container hard-fails on Codex auth failure (intentional — auth is required)
- Firewall IPv6 gap (optional feature, documented limitation)
- NET_ADMIN/NET_RAW always granted (harmless without firewall invocation)
- `develop.sh` doesn't re-validate `.project-name` (machine-generated file)

### Not applicable / resolved by other changes
- `install.sh` self-deletion — docs updated to reflect it's a one-shot installer
- Codex symlink — never needed, `command -v` works, old spec removed
- UID/GID `$HOME` ownership — works correctly for the standard case
